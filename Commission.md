ğŸ§  åˆ†ä½£é€»è¾‘æ€»è§ˆï¼ˆæ¦‚æ‹¬ï¼‰
å½“ç®¡ç†å‘˜å°†æŸä¸€è®¢å• application_status è®¾ç½®ä¸º 'completed' æ—¶ï¼Œç³»ç»Ÿå°†è§¦å‘ï¼š

ç¡®è®¤è®¢å•å­—æ®µï¼ˆé‡‘é¢ã€æ‰€å±ç”¨æˆ·ã€äº§å“ï¼‰

è®¡ç®—ç”¨æˆ·ç­‰çº§ä½£é‡‘ï¼ˆä¸ªäººææˆï¼‰

æŸ¥æ‰¾ä¸Šçº§ä¸ä¸Šä¸Šçº§ç”¨æˆ·

åˆ¤æ–­æ˜¯å¦è§¦å‘çº§å·®ä½£é‡‘

åˆ¤æ–­æ˜¯å¦è§¦å‘ä»£é™…ä½£é‡‘

ç”Ÿæˆä½£é‡‘è®°å½•ï¼ˆå†™å…¥ commission è¡¨ï¼‰

æ›´æ–°ç”¨æˆ·çš„ profitã€team_profitã€total_earnings

å°†è®¢å•ç§»åŠ¨åˆ° saved_orders è¡¨

ğŸ“Š 1. ç¡®è®¤è®¢å•æ ¸å¿ƒå­—æ®µ
ç³»ç»Ÿä¼šä» application_life æˆ– application_annuity ä¸­å–å‡ºä»¥ä¸‹å­—æ®µï¼š

å­—æ®µ	è¯´æ˜
user_id	å½“å‰è®¢å•å½’å±ç”¨æˆ·ï¼ˆä»£ç†äººï¼‰
target_premium	ä½œä¸ºä½£é‡‘è®¡ç®—åŸºæ•°
commission_from_carrier	å¯é€‰ï¼šä¿é™©å…¬å¸ç»™çš„æ€»ä½£é‡‘
application_date, product_name, carrier_name ç­‰	ä¼šä¸€èµ·ä¼ å…¥ commission è¡¨ï¼Œä¾›è®°å½•

ğŸ’° 2. è®¡ç®—ä¸ªäººä½£é‡‘ï¼ˆLevel-basedï¼‰
ç³»ç»ŸæŸ¥æ‰¾è¯¥ç”¨æˆ·çš„ hierarchy_levelï¼Œæ˜ å°„è‡³ commission_chart è¡¨ï¼š

å‡è®¾è¯¥ç”¨æˆ·æ˜¯ Level Bï¼Œå…¶å¯¹åº” percent = 75%

è‹¥ target_premium = 1000ï¼Œåˆ™è¯¥ç”¨æˆ·ææˆ = 1000 * 75% = 750

å‰10000ä¿è´¹æ˜¯æŒ‰70%ç®—

è¶…å‡ºéƒ¨åˆ†æŒ‰75%ç®—

è¿™éƒ¨åˆ†ä¼šæŒ‰â€œç¨é˜¶â€æ–¹å¼åˆ†æ®µè®¡ç®—æ€»é‡‘é¢ã€‚

ğŸ“ˆ 3. æŸ¥æ‰¾ä¸Šä¸‹çº§æˆå‘˜
ç³»ç»Ÿæ ¹æ® users.introducer_id å‘ä¸Šé€’å½’è·å–ï¼š

parent = user.introducer_id â†’ æŸ¥æ‰¾ä¸Šçº§

grandparent = parent.introducer_id â†’ æŸ¥æ‰¾ä¸Šä¸Šçº§

ğŸ“ 4. çº§å·®ä½£é‡‘ï¼ˆLevel Difference Commissionï¼‰
å¦‚æœä¸Šçº§å­˜åœ¨ï¼Œç³»ç»Ÿå¯¹æ¯”ä¸¤è€…ç­‰çº§ç™¾åˆ†æ¯”ï¼š

ä»£ç†äººæ˜¯ Level B = 75%

ä¸Šçº§æ˜¯ Level C = 80%

å·®å€¼ä¸º 5% â†’ ä¸Šçº§å¯ä»¥è·å¾— 10000 * 5% = 500 çš„ çº§å·®ä½£é‡‘

âš ï¸ è‹¥å·®å€¼ <= 0ï¼ˆå¦‚åŒçº§æˆ–ä¸‹çº§ï¼‰ï¼Œåˆ™ä¸ä¸Šçº§å·®ä½£é‡‘ã€‚

ğŸ§¬ 5. ä»£é™…ä½£é‡‘ï¼ˆGeneration Overrideï¼‰
ä»£é™…é€»è¾‘ä½ ç³»ç»Ÿè®¾ç½®å¦‚ä¸‹ï¼š

å¦‚æœè¯¥ç”¨æˆ·åŠä¸Šçº§ä¸æ˜¯ Agent1 æˆ–æ›´é«˜çº§åˆ« â†’ ä¸è§¦å‘

å¦‚æœä¸Šçº§æ˜¯ Agent1 æˆ–æ›´é«˜ â†’ å¯å¯¹å…¶â€œä¸‹ä¸‰ä»£â€æˆå‘˜è·å¾—ä»£é™…ææˆ

é€»è¾‘å¦‚ä¸‹ï¼š

ç³»ç»Ÿå‘ä¸Šè¿½è¸ªæœ€è¿‘çš„ Agent1+

å‘ä¸‹è¿½è¸ªå…¶ä¸‰ä»£ä»¥å†…æˆå‘˜ä¸­æ˜¯å¦åŒ…å«è¯¥ä¸‹å•ç”¨æˆ·

å¦‚æœåŒ…å«ï¼Œåˆ™è¯¥ Agent1+ å¯ä»¥è·å¾—ä»£é™…ä½£é‡‘ï¼Œæ¯”ä¾‹ 5,3,1%

ğŸ§¾ 6. å†™å…¥ä½£é‡‘è®°å½•ï¼ˆæ’å…¥ commission è¡¨ï¼‰
ç³»ç»Ÿä¸ºæ¯æ¡æœ‰æ•ˆä½£é‡‘å†™å…¥ä¸€æ¡è®°å½•ï¼š

å­—æ®µ	ç¤ºä¾‹
user_id	è·ä½£é‡‘è€…IDï¼ˆåŒ…æ‹¬æœ¬äººã€ä¸Šçº§ã€ç¥–çˆ¶çº§ï¼‰
commission_type	Personal, Level Difference, Generation Override
commission_amount	è®¡ç®—å€¼
commission_percent	å¯¹åº”ç™¾åˆ†æ¯”
hierarchy_level	è·ä½£äººç­‰çº§
product_name_carrier, policy_number, application_date, ...	è®¢å•ä¿¡æ¯

âœï¸ æ’å…¥è¡¨ï¼šcommission_life æˆ– commission_annuityï¼Œæ ¹æ®è®¢å•ç±»å‹

ğŸ” 7. æ›´æ–°ç”¨æˆ·çŠ¶æ€
ç³»ç»Ÿå°†åŒæ­¥æ›´æ–°ï¼š

å­—æ®µ	æ“ä½œ
users.total_earnings	å¢åŠ å¯¹åº”ç”¨æˆ·çš„ä½£é‡‘é‡‘é¢
users.profit	ä»…å½“ä¸º ä¸ªäººä½£é‡‘ æ—¶æ‰è®¡å…¥
users.team_profit	å‘ä¸Šçº§åˆ«å±‚å±‚ç´¯åŠ ï¼ˆå¸¸ç”¨äºæ™‹å‡åˆ¤æ–­ï¼‰

ğŸ“¦ 8. ç§»åŠ¨è®¢å•è‡³å½’æ¡£è¡¨
è®¢å•å®Œæˆåï¼ŒåŸå§‹è®°å½•ä»ï¼š

application_life âœ saved_life

application_annuity âœ saved_annuity

å¹¶è®¾ç½®çŠ¶æ€ä¸º distributed